<% if current_user.has_risk_privilege %>
  <hr>
  <div style="display: flex; justify-content: space-between">
    <div class="button-group">
      <% if user.suspended? && user.unpaid_balance_cents.positive? %>
        <%= admin_action label: "Refund balance", url: refund_balance_admin_user_path(user), confirm_message: "Are you sure you want to refund user #{user.id}'s not paid out purchases!?", done: "Refunded.", success_message: "Refunded" %>
      <% end %>
    </div>
  </div>

  <hr>
  <%= react_component "AdminUserGuids", props: { user_id: user.id }, prerender: true %>

  <hr>
  <details>
    <summary>
      <h3>Bio</h3>
    </summary>
    <% if user.bio.present? %>
      <%= user.bio %>
    <% else %>
      <div class="info" role="status">No bio provided.</div>
    <% end %>
  </details>

  <hr>
  <details>
    <summary>
      <h3>Last posts</h3>
    </summary>
    <% user.last_5_created_posts.tap do |posts| %>
      <% if posts.any? %>
        <div class="stack">
          <% user.last_5_created_posts.each do |post| %>
            <div>
              <h5><%= link_to_unless(user.suspended?, post.name, build_view_post_route(post: post)) %></h5>
              <%= format_relative_time(post.created_at) %>
            </div>
          <% end %>
        </div>
      <% else %>
        <div class="info" role="status">No posts created.</div>
      <% end %>
    <% end %>
  </details>
<% end %>
